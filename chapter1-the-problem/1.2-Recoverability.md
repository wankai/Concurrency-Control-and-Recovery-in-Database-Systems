1.2 RECOVERABILITY
---------

The recovery system should make the DBS behave as if the database contains all of the effects of committed transactions and 
none of the effects of uncommitted ones. If transactions never abort, recovery is rather easy. Since all transactions 
eventually commit, the DBS simply executes database operations as they arrives. So to understand recovery, one must first 
look at the processing of Aborts.

When a transaction aborts, the DBS must wipe out its effects. The effects of a transaction T are of two kinds: effects on 
data, that is, values that T wrote in the database; and effects on other transactions, namely, transactions that read values 
written by T. Both should be obliterated.

The DBS should remove T's effects by restoring, for each data item x updated by T, the value x would have had if T had never 
taken place. We say that the DBS undoes T's Write operations.

The DBS should remove T's effects by aborting the affected transactions. Aborting these transactions may trigger further 
abortions, a phenomenon called *cascading abort*.

For example, suppose the initial value of x and y are 1, and suppose transaction T1 and T2 issue opreations that the DBS 
executes in the following order:

> Write1(x, 2)
> Read2(x)
> Write2(y, 3).

The subscript on each Read and Write denote the transaction that issues it. Now suppose T1 aborts. Then the DBS undoes 
Write1(x, 2), restoring x to the value 1. Since T2 read the value x written by T1, T2 must be aborted too, a cascading abort. 
So, the DBS undoes Write2(y, 3), restoring y to 1.

Recall that by committing a transaction, the DBS guarantee that it will not subsequently abort this transaction. Given the 
possibility of cascading aborts, the DBS must be careful when it makes that guarantee. Even if a transaction T issues its 
Commit, the DBS may still need to abort T, because T may yet be invovled in a cascading abort. This will happen if T read a 
data item from some transaction that subsequently aborts. Therefore, T cannot commit until all transactions that wrote values 
read by T are guarantee not to abort, that is, are themselves committed. Execution that satisfy this condition are called 
recoverable.

This is an important concept so let's be more precise. We say transaction Ti read x from Transaction Tj in an execution, if 

1. Tj read x after Ti has written to it;
2. Ti does not abort before Tj read x; and
3. every transaction (if any) that writes x between the time Ti write it and Tj read it, aborts before Tj read it.


